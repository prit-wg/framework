<?phpisset($_GET['action']) ? $action = $_GET['action'] : $action = 'list';isset($_GET['section']) ? $section = $_GET['section'] : $section = 'list';isset($_GET['id']) ? $id = $_GET['id'] : $id = 0;isset($_GET['parent_id']) ? $parent_id = $_GET['parent_id'] : $parent_id = 0;switch ($action):case'list':        $QueryObj = new query('navigation');        $QueryObj->Where = "where parent_id='$parent_id' order by position";        $QueryObj->AllowPaging = true;        $QueryObj->PageSize = ADMIN_CATEGORY_PAGE_SIZE;        $QueryObj->PageNo = isset($_GET['page']) ? $_GET['page'] : 1;        $QueryObj->DisplayAll();        break;    case'insert':        if (isset($_POST['submit'])):            $QueryObj = new query('navigation');            $not = array('submit', 'is_active');            $QueryObj->Data = MakeDataArray($_POST, $not);            $QueryObj->Data['is_active'] = isset($_POST['is_active']) ? 1 : 0;            $QueryObj->Insert();            Redirect(make_admin_url('content_navigation', 'list', 'list', 'parent_id=' . $_POST['parent_id']));        endif;        break;    case'update':        $QueryObj = new query('navigation');        $QueryObj->Where = "where id='" . $id . "'";        $navigation = $QueryObj->DisplayOne();        if (isset($_POST['submit'])):            $QueryObj = new query('navigation');            $not = array('submit', 'is_active');            $QueryObj->Data = MakeDataArray($_POST, $not);            $QueryObj->Data['id'] = $id;            $QueryObj->Data['is_active'] = isset($_POST['is_active']) ? 1 : 0;            $QueryObj->Update();            Redirect(make_admin_url('content_navigation', 'list', 'list', 'parent_id=' . $navigation->parent_id));        endif;        break;    case 'update2':        $chip_info = new query('navigation');        $chip_info->Where = "where is_active='1'";        $chip_info->DisplayAll();        $chip1 = array();        while ($pa = $chip_info->GetObjectFromRecord()):            $chip1[$pa->id] = $pa->name;        endwhile;        if (isset($_POST['update_position'])):            foreach ($_POST['position'] as $k => $v):                $Q = new query('navigation');                if ($v == ''):                    $Q->Data['position'] = 0;                else:                    $Q->Data['position'] = $v;                endif;                $Q->Data['id'] = $k;                $Q->Update();            endforeach;        endif;        if (isset($_POST['submit'])):            $chip_info = new query('navigation');            $chip_info->Where = "where is_active='1' and parent_id='$parent_id'";            $chip_info->DisplayAll();            $chip1 = array();            while ($pa = $chip_info->GetObjectFromRecord()):                $chip1[$pa->id] = $pa->name;            endwhile;            $act_count = array();            foreach ($chip1 as $kk => $vv):                if (!in_array($vv, $_POST['is_active'])):                    $act_count[$kk] = $vv;                endif;            endforeach;            if (sizeof($act_count) != 0):                foreach ($act_count as $k => $v):                    $QueryObj1 = new query('navigation');                    $QueryObj1->Data['is_active'] = 0;                    $QueryObj1->Data['id'] = $k;                    $QueryObj1->Update();                endforeach;            endif;            foreach ($_POST['is_active'] as $k => $v):                $QueryObj = new query('navigation');                $QueryObj->Data['is_active'] = 1;                $QueryObj->Data['id'] = $k;                $QueryObj->Update();            endforeach;        endif;        Redirect(make_admin_url('content_navigation', 'list', 'list', 'parent_id=' . $parent_id));        break;    case'delete':        $QueryObj = new query('navigation');        $QueryObj->id = $id;        $QueryObj->Delete();        Redirect(make_admin_url('content_navigation', 'list', 'list', 'parent_id=' . $parent_id));        break;    default:break;endswitch;?>